{% extends 'dockerfile/base.jinja2' %}

{% block from %}
FROM python:3.9-slim-buster
{% endblock %}

{% block pip %}
{{ super() }}
RUN pip install --no-cache jupyterhub==1.3.0 notebook==6.0.0
{% endblock %}

{% block jupyter_setup %}
{{ super() }}
RUN mkdir /etc/jupyter
COPY jupyter_notebook_config.py /etc/jupyter/jupyter_notebook_config.py
COPY start-notebook.sh /usr/bin/start.sh
RUN chmod a+x /usr/bin/start.sh
{% endblock %}

{% block entrypoint %}
EXPOSE 8888
{% endblock %}

{% block cmd %}
CMD ["start.sh"]
{% endblock%}
